<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†</title>
    <style>
      .notification {
    animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

        body { font-family: Arial, sans-serif; text-align: center; background: url('https://up6.cc/2025/02/174009452653041.png') no-repeat center center fixed; background-size: cover; color: white; }
        h1 { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.7); padding: 15px; border-radius: 10px; z-index: 1000; width: 80%; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 80px; padding-bottom: 120px; }
        .device { border: 2px solid #fff; padding: 15px; margin: 10px; width: 260px; background: rgba(0, 0, 0, 0.8); border-radius: 10px; text-align: center; transition: 0.3s; }
        .device.available { background-color: #28a745; }
        .device.occupied { background-color: #dc3545; }
        .device.finished { background-color: #007bff; }
        .device.paused { background-color: #ffc107; color: black; }
        button { padding: 10px; border: none; cursor: pointer; margin: 5px; border-radius: 5px; transition: 0.3s; }
        .start-multi { background-color: #007bff; color: white; }
        .start-single { background-color: #6f42c1; color: white; }
        .start-open { background-color: #ffc107; color: black; }
        .end-game { background-color: #dc3545; color: white; }
        .pause-game { background-color: #ff9800; color: black; }
        .resume-game { background-color: #17a2b8; color: white; }
        .reset-device { background-color: #28a745; color: white; }
    </style>
</head>
<body>
<div id="notifications-container" style="position: fixed; bottom: 10px; left: 10px; z-index: 1000;"></div>
<h1>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†</h1>
<div id="devices" class="container"></div>
<script>
       let devices = JSON.parse(localStorage.getItem('devices')) || Array.from({ length: 6 }, (_, i) => ({
    id: i + 1,
    status: 'Ù…ØªØ§Ø­',
    startTime: null,
    endTime: null,
    mode: null,
    remainingTime: null,
    price: null,
    orders: [] // âœ… Ø¥Ø¶Ø§ÙØ© Ù…ØµÙÙˆÙØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù‡Ù†Ø§
}));
      let currentDeviceId = null;

      const alertSounds = [
    "https://k.top4top.io/m_3373pafzk1.mp3",
    "https://b.top4top.io/m_337378vyg1.mp3",
    "https://f.top4top.io/m_3373f1bk11.mp3",
    "https://k.top4top.io/m_3373wrmjz1.mp3",
    "https://b.top4top.io/m_3373gsoty1.mp3",
    "https://c.top4top.io/m_3373vjgdn1.mp3"
];

function playAlertSound(deviceId) {
    if (deviceId > 0 && deviceId <= alertSounds.length) {
        let audio = new Audio(alertSounds[deviceId - 1]);
        audio.play();
    } else {
        console.warn("âš ï¸ Ø§Ù„Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙˆØ§Øª!");
    }
}
      function playAlertSound(deviceId) {
    if (deviceId > 0 && deviceId <= alertSounds.length) {
        let audio = new Audio(alertSounds[deviceId - 1]);
        audio.play().catch(error => console.error("ğŸ”´ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:", error));
    } else {
        console.warn("âš ï¸ Ø§Ù„Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙˆØ§Øª!");
    }
}

      
      let gameLog = JSON.parse(localStorage.getItem("gameLog")) || [];

// Ø¯Ø§Ù„Ø© ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨
function toggleLog() {
    let logContainer = document.getElementById("logContainer");
    logContainer.style.display = logContainer.style.display === "none" ? "block" : "none";
    updateLogTable();
}

// Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø¬Ù„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
function updateLogTable() {
    let logTable = document.getElementById("logTable");
    let totalEarningsElem = document.getElementById("totalEarnings");
    logTable.innerHTML = "";
    let totalEarnings = 0;

    gameLog.forEach((entry, index) => {
        totalEarnings += entry.price;
        let row = `<tr>
            <td>${entry.deviceId}</td>
            <td>${entry.playDuration} Ø¯Ù‚ÙŠÙ‚Ø©</td>
            <td>${new Date(entry.startTime).toLocaleTimeString('ar-EG')}</td>
            <td>${new Date(entry.endTime).toLocaleTimeString('ar-EG')}</td>
            <td>${entry.price} Ø¬Ù†ÙŠÙ‡</td>
            <td>${entry.mode === 'multi' ? 'Ù…Ø§Ù„ØªÙŠ' : 'ÙØ±Ø¯ÙŠ'}</td>
            <td><button onclick="deleteLogEntry(${index})" style="background-color: red; color: white; border: none; padding: 5px; cursor: pointer;">ğŸ—‘ï¸</button></td>
        </tr>`;
        logTable.innerHTML += row;
    });

    totalEarningsElem.textContent = totalEarnings;
}

// Ø¯Ø§Ù„Ø© Ù„Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
function deleteLog() {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ")) {
        gameLog = [];
        localStorage.removeItem("gameLog");
        updateLogTable();
    }
}

// Ø¯Ø§Ù„Ø© Ù„Ø­Ø°Ù Ø¬Ù„Ø³Ø© Ù…Ø¹ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø³Ø¬Ù„
function deleteLogEntry(index) {
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©ØŸ")) {
        gameLog.splice(index, 1);
        localStorage.setItem("gameLog", JSON.stringify(gameLog));
        updateLogTable();
    }
}



      function updateDevices() {
    let container = document.getElementById('devices');
    container.innerHTML = '';  // ØªÙØ±ÙŠØº Ø§Ù„Ø¹Ù†ØµØ± Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©
    let now = Date.now();  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ

    devices.forEach(device => {
        if (device.status === 'Ù…Ø´ØºÙˆÙ„' && device.endTime) {
            device.remainingTime = Math.max(0, Math.ceil((device.endTime - now) / 1000));  // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
            if (device.remainingTime <= 0) {
                playAlertSound(device.id);  // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¥Ø°Ø§ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª
                endDevice(device.id);  // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¥Ø°Ø§ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª
            }
        }
        
        let div = document.createElement('div');
        div.className = `device ${device.status === 'Ù…ØªØ§Ø­' ? 'available' 
            : device.status === 'Ù…Ø´ØºÙˆÙ„' ? 'occupied' 
            : device.status === 'Ù…ØªÙˆÙ‚Ù' ? 'paused' 
            : 'finished'}`;

        div.innerHTML = `
            <h3>Ø¬Ù‡Ø§Ø² ${device.id}</h3>
            <p>Ø§Ù„Ø­Ø§Ù„Ø©: ${device.status}</p>
            <p>Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨: ${device.mode ? (device.mode === 'multi' ? 'Ù…Ø§Ù„ØªÙŠ' : device.mode === 'single' ? 'ÙØ±Ø¯ÙŠ' : 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­') : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
            ${device.startTime ? `<p>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ${new Date(device.startTime).toLocaleTimeString('ar-EG')}</p>` : ''}
            ${device.endTime ? `<p>ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ${new Date(device.endTime).toLocaleTimeString('ar-EG')}</p>` : ''}
            ${device.remainingTime !== null && device.status === 'Ù…Ø´ØºÙˆÙ„' && device.endTime ? `<p>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${Math.floor(device.remainingTime / 3600)} Ø³Ø§Ø¹Ø© Ùˆ ${Math.floor((device.remainingTime % 3600) / 60)} Ø¯Ù‚ÙŠÙ‚Ø© Ùˆ ${device.remainingTime % 60} Ø«Ø§Ù†ÙŠØ©</p>` : ''}
            ${device.status === 'Ù…ØªÙˆÙ‚Ù' ? `<p>Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…ØªÙˆÙ‚ÙØ© Ù…Ø¤Ù‚ØªÙ‹Ø§</p>` : ''}
            ${device.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? `
                <p>â³ Ù…Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨: ${device.duration} Ø¯Ù‚ÙŠÙ‚Ø©</p>
                <p>ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${device.price} Ø¬Ù†ÙŠÙ‡</p>
                ${device.orders && device.orders.length > 0 ? `
                    <div style="text-align:right; margin-top:10px;">
                        <p>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:</p>
                        <ul style="list-style:none; padding:0;">
                            ${device.orders.map((o, index) => `
  <li>
    â€¢ ${o.name} Ã— ${o.quantity} = ${o.total} Ø¬Ù†ÙŠÙ‡
    <button onclick="deleteOrder(${device.id}, ${index})" style="margin-right: 10px; background-color: red; color: white; border: none; padding: 2px 6px; border-radius: 4px; cursor: pointer;">ğŸ—‘ï¸</button>
  </li>
`).join('')}

                        </ul>
                        <p>ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ${device.orders.reduce((sum, order) => sum + order.total, 0)} Ø¬Ù†ÙŠÙ‡</p>
                    </div>
                ` : ''}
                <p>ğŸ’µ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${device.totalPrice} Ø¬Ù†ÙŠÙ‡</p>
            ` : ''}

            <button class="start-multi" onclick="setDeviceTime(${device.id}, 'multi')">Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø§Ù„ØªÙŠ</button>
            <button class="start-single" onclick="setDeviceTime(${device.id}, 'single')">Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨ ÙØ±Ø¯ÙŠ</button>
            <button class="start-open" onclick="setDeviceTime(${device.id}, 'open')">Ø¨Ø¯Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­</button>
            <button class="end-game" onclick="endDevice(${device.id})" ${device.status !== 'Ù…Ø´ØºÙˆÙ„' ? 'disabled' : ''}>Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨</button>
            <button class="toggle-pause" onclick="togglePause(${device.id})" ${device.status === 'Ù…ØªØ§Ø­' || device.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? 'disabled' : ''}>
                ${device.status === 'Ù…Ø´ØºÙˆÙ„' ? 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª' : device.status === 'Ù…ØªÙˆÙ‚Ù' ? 'â–¶ï¸ Ø§Ø³ØªØ¦Ù†Ø§Ù' : ''}
            </button>

            ${device.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? `<button class="reset-device" onclick="resetDevice(${device.id})">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>` : ''}

            <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆÙ‚Øª ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø´ØºÙˆÙ„Ù‹Ø§ -->
            ${device.status === 'Ù…Ø´ØºÙˆÙ„' ? `<button class="add-time" onclick="addTime(${device.id})">Ø¥Ø¶Ø§ÙØ© ÙˆÙ‚Øª</button>` : ''}
            ${device.status === 'Ù…Ø´ØºÙˆÙ„'
 && device.orders && device.orders.length > 0 ? `
    <div style="text-align:right; margin-top:10px;">
        <p>ğŸ“‹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:</p>
        <ul style="list-style:none; padding:0;">
            ${device.orders.map((o, index) => `
                <li>
                    â€¢ ${o.name} Ã— ${o.quantity} = ${o.total} Ø¬Ù†ÙŠÙ‡
                    <button onclick="deleteOrder(${device.id}, ${index})" style="margin-right: 10px; background-color: red; color: white; border: none; padding: 2px 6px; border-radius: 4px; cursor: pointer;">ğŸ—‘ï¸</button>
                </li>
            `).join('')}
        </ul>
    </div>
` : ''}


            ${device.status === 'Ù…Ø´ØºÙˆÙ„' ? `<button style="background-color:black; color:white; margin-top:5px;" onclick="addOrder(${device.id})">Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨</button>` : ''}
        `;
        
        container.appendChild(div);  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    });

    localStorage.setItem("devices", JSON.stringify(devices));  // Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
}




        function setDeviceTime(id, mode) {
    let device = devices.find(d => d.id === id);
    
    if (mode === 'open') {
        let gameType = prompt("Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨:\n1 - Ù…Ø§Ù„ØªÙŠ\n2 - ÙØ±Ø¯ÙŠ");
        if (gameType === '1') {
            device.mode = 'multi';
        } else if (gameType === '2') {
            device.mode = 'single';
        } else {
            alert("Ø®ÙŠØ§Ø± ØºÙŠØ± ØµØ§Ù„Ø­!");
            return;
        }

        device.status = "Ù…Ø´ØºÙˆÙ„";
        device.startTime = Date.now();
        device.endTime = null; // Ù„Ø£Ù†Ù‡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­
        device.price = null; // Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¹Ø± Ù…Ø­Ø¯Ø¯ Ø¨Ø§Ù„ÙˆÙ‚Øª
    } else {
        let duration = prompt("Ø£Ø¯Ø®Ù„ Ù…Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚:");
duration = parseInt(duration);

if (isNaN(duration) || duration <= 0) {
    alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ù„Ù„Ø¯Ù‚Ø§Ø¦Ù‚.");
    return;
}

        device.mode = mode;
        device.price = (mode === 'multi' ? 30 : 20) * (duration / 60);
        device.status = "Ù…Ø´ØºÙˆÙ„";
        device.startTime = Date.now();
        device.endTime = device.startTime + duration * 60000;
    }

    updateDevices();
}
      
 function deleteOrder(deviceId, orderIndex) {
    if (!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ")) return;

    const device = devices.find(d => d.id === deviceId);
    if (!device || !device.orders || orderIndex < 0 || orderIndex >= device.orders.length) return;

    device.orders.splice(orderIndex, 1); // Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨
    updateDevices(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
}

      

 function addTime(id) {
    let device = devices.find(d => d.id === id);  // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø¹Ù†ÙŠ
    if (device && device.status === 'Ù…Ø´ØºÙˆÙ„') {  // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø´ØºÙˆÙ„
        let extraTime = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø¥Ø¶Ø§ÙØªÙ‡ (Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚):");
        extraTime = parseInt(extraTime);  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­ (Ø¯Ù‚Ø§Ø¦Ù‚)

        if (isNaN(extraTime) || extraTime <= 0) {
            alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙˆÙ‚Øª ØµØ­ÙŠØ­.");
            return;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ endTime
        device.endTime += extraTime * 60000;  // 60000 Ù…Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© = Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ø¹ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª)
        let now = Date.now();
        device.remainingTime = Math.max(0, Math.ceil((device.endTime - now) / 1000));  // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆØ§Ù„Ø«ÙˆØ§Ù†ÙŠ

        updateDevices();  // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    }
}

  function addOrder(deviceId) {
    currentDeviceId = deviceId;
    document.getElementById("orderModal").style.display = "block";
}




function fillOrderFields() {
  const selected = document.getElementById("orderItemSelect").value;
  if (selected) {
    const [name, price] = selected.split(',');
    document.getElementById("orderItemName").value = name;
    document.getElementById("orderItemPrice").value = price;
  }
}






 function togglePause(id) {
    let device = devices.find(d => d.id === id);
    
    if (device.status === "Ù…Ø´ØºÙˆÙ„") {
        // Ø­ÙØ¸ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙ‚Ø· Ù„Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø¨Ø²Ù…Ù†
        device.status = "Ù…ØªÙˆÙ‚Ù";
        device.pausedTime = Date.now();
        if (device.endTime) {
            device.remainingTime = Math.max(0, Math.ceil((device.endTime - device.pausedTime) / 1000));
        }
    } else if (device.status === "Ù…ØªÙˆÙ‚Ù") {
        let pausedDuration = Date.now() - device.pausedTime;
        
        if (device.endTime) {
            // ØªØ¹Ø¯ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„ÙŠØ¹ÙˆØ¶ ÙˆÙ‚Øª Ø§Ù„ØªÙˆÙ‚Ù
            device.startTime += pausedDuration;
            device.endTime += pausedDuration;
        }

        device.status = "Ù…Ø´ØºÙˆÙ„";
    }

    updateDevices();
}


        function resetDevice(id) {
    let device = devices.find(d => d.id === id);

    if (device) {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
        device.status = "Ù…ØªØ§Ø­";
        device.startTime = null;
        device.endTime = null;
        device.mode = null;
        device.duration = null;
        device.price = null;
        device.remainingTime = null;

        updateDevices(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    }
}




function submitOrder() {
  const name = document.getElementById("orderItemName").value.trim();
  const price = parseFloat(document.getElementById("orderItemPrice").value);
  const quantity = parseInt(document.getElementById("orderItemQty").value);

  console.log({ name, price, quantity });

  if (!name || isNaN(price) || price <= 0 || isNaN(quantity) || quantity <= 0) {
    alert("âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© Ù„ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„.");
    return;
  }

  const total = price * quantity;
  const device = devices.find(d => d.id === currentDeviceId);
  if (!device) return;

  device.orders.push({ name, price, quantity, total });

  document.getElementById("orderItemName").value = '';
  document.getElementById("orderItemPrice").value = '';
  document.getElementById("orderItemQty").value = 1;
  document.getElementById("orderItemSelect").value = '';

  closeOrderModal();
  updateDevices();
}


 
        function closeOrderModal() {
    document.getElementById("orderModal").style.display = "none";
}


        function resetDevice(id) {
    let device = devices.find(d => d.id === id);

    if (device) {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
        device.status = "Ù…ØªØ§Ø­";
        device.startTime = null;
        device.endTime = null;
        device.mode = null;
        device.duration = null;
        device.price = null;
        device.remainingTime = null;
      device.orders = []; // Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨Ø§Øª

        updateDevices(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    }
}

        function endDevice(id) {
    let device = devices.find(d => d.id === id);
    if (!device || device.status !== "Ù…Ø´ØºÙˆÙ„") return;

    device.endTime = Date.now(); // ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©

    // âœ… Ø­Ø³Ø§Ø¨ Ù…Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ØŒ Ù…Ø¹ Ø§Ù„Ø£Ø®Ø° ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± Ø§Ù„ØªÙˆÙ‚ÙØ§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©
    let playDuration = Math.floor(
        ((device.endTime || Date.now()) - device.startTime - (device.pausedDuration || 0)) / 60000
    );

    device.duration = playDuration;

    // âœ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„ÙˆÙ‚Øª Ù…ÙØªÙˆØ­Ù‹Ø§
    if (device.mode !== 'open') {
        device.price = (device.mode === 'multi' ? 30 : 20) * (playDuration / 60);
    } else {
        device.price = "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"; // Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø³Ø¹Ø± Ù…Ø­Ø¯Ø¯
    }

    // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    let totalOrders = 0;
    if (device.orders && device.orders.length > 0) {
        totalOrders = device.orders.reduce((sum, order) => sum + order.total, 0);
    }

    // Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø¹Ø± + Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    device.totalPrice = (typeof device.price === 'number' ? device.price : 0) + totalOrders;

    device.status = "Ù…Ù†ØªÙ‡ÙŠ";

    // âœ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© ÙÙŠ `localStorage`
    localStorage.setItem("lastSession", JSON.stringify(device));

    // âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ù„Ø³Ø© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
    gameLog.push({
        deviceId: device.id,
        playDuration: device.duration,
        startTime: device.startTime,
        endTime: device.endTime,
        price: device.totalPrice || 0,
        mode: device.mode,
        orders: device.orders
    });

    // âœ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ ÙÙŠ `localStorage`
    localStorage.setItem("gameLog", JSON.stringify(gameLog));

    // âœ… ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù‡Ø§Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    let audio = new Audio(`sounds/device${id}.mp3`);
    audio.play();

    updateDevices();
}



        setInterval(updateDevices, 1000);
    </script>
<a href="index.html" style="position: fixed; bottom: 180px; right: 20px; background-color: #003366; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; text-decoration: none;"> ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© </a> <a href="https://ahmedtalaatabdelhalim.github.io/-/" target="_blank" style="position: fixed; bottom: 120px; right: 20px; background-color: #6f42c1; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; text-align: center;" rel="noopener"> ğŸ“ ØªØ³Ø¬ÙŠÙ„ ÙŠØ¯ÙˆÙŠ </a> <button id="showLogBtn" onclick="toggleLog()" style="position: fixed; bottom: 60px; right: 20px; background-color: #17a2b8; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;"> ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨ </button>
<div id="logContainer" style="display: none; position: fixed; bottom: 50px; right: 20px; background: rgba(0, 0, 0, 0.8); padding: 20px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 400px; overflow-y: auto;">
<h2>Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨</h2>
<table border="1" width="100%" style="border-collapse: collapse; color: white; text-align: center;">
<thead>
<tr>
<th>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
<th>Ù…Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</th>
<th>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</th>
<th>ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</th>
<th>Ø§Ù„Ø³Ø¹Ø±</th>
<th>Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="logTable"></tbody>
</table>
<p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: </strong><span id="totalEarnings">0</span> Ø¬Ù†ÙŠÙ‡</p>
<button onclick="deleteLog()" style="background-color: red; color: white; padding: 10px; border-radius: 5px; border: none; cursor: pointer;">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„</button> <button onclick="toggleLog()" style="background-color: gray; color: white; padding: 10px; border-radius: 5px; border: none; cursor: pointer;">âŒ Ø¥ØºÙ„Ø§Ù‚</button></div>
<div id="logContainer" style="display: none; position: fixed; bottom: 50px; right: 20px; background: rgba(0, 0, 0, 0.8); padding: 20px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 400px; overflow-y: auto;">
<h2>Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨</h2>
<table border="1" width="100%" style="border-collapse: collapse; color: white; text-align: center;">
<thead>
<tr>
<th>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
<th>Ù…Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</th>
<th>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</th>
<th>ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</th>
<th>Ø§Ù„Ø³Ø¹Ø±</th>
<th>Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="logTable"></tbody>
</table>
<p><strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­:
<script>
let gameLog = JSON.parse(localStorage.getItem("gameLog")) || [];

function toggleLog() {
    let logContainer = document.getElementById("logContainer");
    logContainer.style.display = logContainer.style.display === "none" ? "block" : "none";
    updateLogTable();
}

function updateLogTable() {
    let logTable = document.getElementById("logTable");
    let totalEarningsElem = document.getElementById("totalEarnings");
    logTable.innerHTML = "";
    let totalEarnings = 0;

    gameLog.forEach((entry, index) => {
        totalEarnings += entry.price;
        let row = `<tr>
            <td>${entry.deviceId}</td>
            <td>${entry.playDuration} Ø¯Ù‚ÙŠÙ‚Ø©</td>
            <td>${new Date(entry.startTime).toLocaleTimeString('ar-EG')}</td>
            <td>${new Date(entry.endTime).toLocaleTimeString('ar-EG')}</td>
            <td>${entry.price} Ø¬Ù†ÙŠÙ‡</td>
            <td>${entry.mode === 'multi' ? 'Ù…Ø§Ù„ØªÙŠ' : 'ÙØ±Ø¯ÙŠ'}</td>
            <td><button onclick="deleteLogEntry(${index})" style="background-color: red; color: white; border: none; padding: 5px; cursor: pointer;">ğŸ—‘ï¸</button></td>
        </tr>`;
        logTable.innerHTML += row;
    });

    totalEarningsElem.textContent = totalEarnings;
}

function deleteLog() {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ")) {
        gameLog = [];
        localStorage.removeItem("gameLog");
        updateLogTable();
    }
}

function deleteLogEntry(index) {
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©ØŸ")) {
        gameLog.splice(index, 1);
        localStorage.setItem("gameLog", JSON.stringify(gameLog));
        updateLogTable();
    }
}
        function showNotification(deviceName) {
    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ù†Ø§ÙØ°Ø©
    let notification = document.createElement("div");
    notification.classList.add("notification");
    notification.innerHTML = `
        <span>ğŸ”” Ø§Ù†ØªÙ‡Ù‰ ${deviceName}</span>
        <button class="close-btn">&times;</button>
    `;

    // ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ø§ÙØ°Ø© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„Ø§Ø­Ù‚Ù‹Ø§ ÙÙŠ CSS)
    Object.assign(notification.style, {
        background: "#333",
        color: "white",
        padding: "10px",
        margin: "5px 0",
        borderRadius: "5px",
        display: "flex",
        alignItems: "center",
        justifyContent: "space-between",
        minWidth: "180px",
        maxWidth: "220px",
        position: "relative",
        boxShadow: "0 2px 5px rgba(0, 0, 0, 0.2)",
    });

    // Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
    let closeBtn = notification.querySelector(".close-btn");
    closeBtn.style.background = "transparent";
    closeBtn.style.color = "white";
    closeBtn.style.border = "none";
    closeBtn.style.cursor = "pointer";
    closeBtn.style.fontSize = "16px";

    // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ØŒ Ø§Ø­Ø°Ù Ø§Ù„Ù†Ø§ÙØ°Ø©
    closeBtn.addEventListener("click", function () {
        notification.remove();
    });

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
    document.getElementById("notifications-container").appendChild(notification);
}

</script>
  <select id="predefinedItems" onchange="fillOrderFields()">
<option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option>
<option value="Ø¨ÙŠØ¨Ø³ÙŠ,20">Ø¨ÙŠØ¨Ø³ÙŠ - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø´ÙŠØ¨Ø³ÙŠ ØµØºÙŠØ±,5">Ø´ÙŠØ¨Ø³ÙŠ ØµØºÙŠØ± - 5 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙƒØ¨ÙŠØ±,20">Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙƒØ¨ÙŠØ± - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø´Ø§ÙŠ,10">Ø´Ø§ÙŠ - 10 Ø¬Ù†ÙŠÙ‡</option>
</select><br /><br /><label>Ø§Ø³Ù… Ø§Ù„Ø·Ù„Ø¨:</label> <input type="text" id="orderName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø·Ù„Ø¨" /> <br /><br /><label>Ø§Ù„Ø³Ø¹Ø±:</label> <input type="number" id="orderPrice" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¹Ø±" /> <br /><br /><label>Ø§Ù„Ø¹Ø¯Ø¯:</label> <input type="number" id="orderQuantity" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ø¯Ø¯" value="1" /> <br /><br /><button onclick="submitOrder()">Ø¥Ø¶Ø§ÙØ©</button> <button onclick="closeOrderModal()">Ø¥Ù„ØºØ§Ø¡</button> </strong></p>
</div>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù„ØªÙƒÙˆÙ† ÙØ±ÙŠØ¯Ø© -->
<div id="orderModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; color: black; padding: 20px; border: 2px solid black; z-index: 1000; border-radius: 10px;">
<h3>Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨</h3>
<select id="orderItemSelect" onchange="fillOrderFields()">
<option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option>
<option value="ÙƒÙ†Ø²,20">ÙƒÙ†Ø² - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="ØªÙˆÙŠØ³Øª,20">ØªÙˆÙŠØ³Øª - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙÙŠÙˆØ±ÙŠ,20">ÙÙŠÙˆØ±ÙŠ - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙÙˆÙ„Øª,15">ÙÙˆÙ„Øª - 15 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø¹ØµÙŠØ± Ø³Ø§Ù†ØªÙˆØ¨,15">Ø¹ØµÙŠØ± Ø³Ø§Ù†ØªÙˆØ¨ - 15 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ø³ØªÙ†Ø¬ Ø²Ø¬Ø§Ø¬,15">Ø§Ø³ØªÙ†Ø¬ Ø²Ø¬Ø§Ø¬ - 15 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ø³ØªÙ†Ø¬ Ø¨Ù„Ø§Ø³ØªÙŠÙƒ,10">Ø§Ø³ØªÙ†Ø¬ Ø¨Ù„Ø§Ø³ØªÙŠÙƒ - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø¹ØµÙŠØ± Ø¯ÙˆÙ…ØªÙŠ,10">Ø¹ØµÙŠØ± Ø¯ÙˆÙ…ØªÙŠ - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø´ÙŠØ¨Ø³ÙŠ ÙƒØ¨ÙŠØ±,10">Ø´ÙŠØ¨Ø³ÙŠ ÙƒØ¨ÙŠØ± - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø´ÙŠØ¨Ø³ÙŠ ØµØºÙŠØ±,5">Ø´ÙŠØ¨Ø³ÙŠ ØµØºÙŠØ± - 5 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒØ§Ø±Ø§ØªÙŠÙ‡ ÙƒØ¨ÙŠØ±,10">ÙƒØ§Ø±Ø§ØªÙŠÙ‡ ÙƒØ¨ÙŠØ± - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒØ§Ø±Ø§ØªÙŠÙ‡ ØµØºÙŠØ±,5">ÙƒØ§Ø±Ø§ØªÙŠÙ‡ ØµØºÙŠØ± - 5 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø¨Ø³ÙƒÙˆØª Ø§Ùˆ Ù†Ø§ÙŠØªÙŠ ÙƒØ¨ÙŠØ±,10">Ø¨Ø³ÙƒÙˆØª Ø§Ùˆ Ù†Ø§ÙŠØªÙŠ ÙƒØ¨ÙŠØ± - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø¨Ø³ÙƒÙˆØª Ø§Ùˆ Ù†Ø§ÙŠØªÙŠ ØµØºÙŠØ±,5">Ø¨Ø³ÙƒÙˆØª Ø§Ùˆ Ù†Ø§ÙŠØªÙŠ ØµØºÙŠØ± - 5 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ù…ÙˆÙ„ØªÙˆ Ø¬Ø§Ù…Ø¨Ùˆ,20">Ù…ÙˆÙ„ØªÙˆ Ø¬Ø§Ù…Ø¨Ùˆ - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ù…ÙˆÙ„ØªÙˆ ÙˆØ³Ø·,15">Ù…ÙˆÙ„ØªÙˆ ÙˆØ³Ø· - 15 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ù…ÙˆÙ„ØªÙˆ ØµØºÙŠØ±,10">Ù…ÙˆÙ„ØªÙˆ ØµØºÙŠØ± - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙƒØ¨ÙŠØ±,20">Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙƒØ¨ÙŠØ± - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙˆØ³Ø·,15">Ø§Ù†Ø¯ÙˆÙ…ÙŠ ÙˆØ³Ø· - 15 Ø¬Ù†ÙŠÙ‡</option>
<option value="Ø§Ù†Ø¯ÙˆÙ…ÙŠ ØµØºÙŠØ±,10">Ø§Ù†Ø¯ÙˆÙ…ÙŠ ØµØºÙŠØ± - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒÙˆØ¨ Ù‚Ù‡ÙˆÙ‡,20">ÙƒÙˆØ¨ Ù‚Ù‡ÙˆÙ‡ - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒÙˆØ¨ ÙƒØ§ÙÙŠ Ù…Ø§ÙƒØ³,20">ÙƒÙˆØ¨ ÙƒØ§ÙÙŠ Ù…Ø§ÙƒØ³ - 20 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒÙˆØ¨ Ø´Ø§ÙŠ,10">ÙƒÙˆØ¨ Ø´Ø§ÙŠ - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒÙˆØ¨ ÙŠØ§Ù†Ø³ÙˆÙ†,10">ÙƒÙˆØ¨ ÙŠØ§Ù†Ø³ÙˆÙ† - 10 Ø¬Ù†ÙŠÙ‡</option>
<option value="ÙƒÙˆØ¨ Ù†Ø¹Ù†Ø§Ø¹,10">ÙƒÙˆØ¨ Ù†Ø¹Ù†Ø§Ø¹ - 10 Ø¬Ù†ÙŠÙ‡</option>
</select><br /><br /><label>Ø§Ø³Ù… Ø§Ù„Ø·Ù„Ø¨:</label> <input type="text" id="orderItemName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø·Ù„Ø¨" /> <br /><br /><label>Ø§Ù„Ø³Ø¹Ø±:</label> <input type="number" id="orderItemPrice" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¹Ø±" /> <br /><br /><label>Ø§Ù„Ø¹Ø¯Ø¯:</label> <input type="number" id="orderItemQty" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ø¯Ø¯" value="1" /> <br /><br /><button onclick="submitOrder()">âœ… Ø¥Ø¶Ø§ÙØ©</button>
 <button onclick="closeOrderModal()">âŒ Ø¥Ù„ØºØ§Ø¡</button></div>
</body>
  <!-- ØªÙƒØ§Ù…Ù„ Firebase: Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ù„Ù Ù…Ø¨Ø§Ø´Ø±Ø© Ù‚Ø¨Ù„ </body> -->



<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB-V4wfOFAdslSj8pe0shtYx7I8W9CA-oM",
    authDomain: "ps4-manager-31b11.firebaseapp.com",
    databaseURL: "https://ps4-manager-31b11-default-rtdb.firebaseio.com",
    projectId: "ps4-manager-31b11",
    storageBucket: "ps4-manager-31b11.firebasestorage.app",
    messagingSenderId: "677331962224",
    appId: "1:677331962224:web:d168c795b26bda8614e7b5",
    measurementId: "G-YCP27E9WVL"
  };

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  function saveDevicesToFirebase(devices) {
    set(ref(database, 'devices'), devices);
  }

import { get } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";

function loadDevicesFromFirebase() {
  const devicesRef = ref(database, 'devices');
  get(devicesRef).then((snapshot) => {
    const data = snapshot.val();
    if (data) {
      devices = data;
      localStorage.setItem("devices", JSON.stringify(devices)); 
      updateDevices();
    }
  });
}


  window.onload = loadDevicesFromFirebase;

  const originalUpdateDevices = updateDevices;
  window.updateDevices = function() {
    originalUpdateDevices();
    saveDevicesToFirebase(devices);
  };

  function submitOrder() {
    const name = document.getElementById("orderItemName").value.trim();
    const price = parseFloat(document.getElementById("orderItemPrice").value);
    const quantity = parseInt(document.getElementById("orderItemQty").value);

    if (!name || isNaN(price) || price <= 0 || isNaN(quantity) || quantity <= 0) {
      alert("âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© Ù„ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„.");
      return;
    }

    const total = price * quantity;
    const device = devices.find(d => d.id === currentDeviceId);
    if (!device) return;

    if (!device.orders) device.orders = [];
    device.orders.push({ name, price, quantity, total });

    document.getElementById("orderItemName").value = '';
    document.getElementById("orderItemPrice").value = '';
    document.getElementById("orderItemQty").value = 1;
    document.getElementById("orderItemSelect").value = '';

    closeOrderModal();
    updateDevices(); // ÙŠØ­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Firebase Ø£ÙŠØ¶Ù‹Ø§
    setTimeout(loadDevicesFromFirebase, 500);

  }

  window.submitOrder = submitOrder;
  window.closeOrderModal = closeOrderModal;
  window.addOrder = addOrder;
</script>

</html>
